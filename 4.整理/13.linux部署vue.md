# linux部署vue

## 1.基本环境
- 操作系统：Windows10
- 云服务器：linux
- 连接linux：xshell6
- ftp文件上传：FileZilla Client
- 反向代理：nginx

## 2.基本命令
- 检查网络是否连通，在Windows10系统通过控制台输入ping xxx.xx.xxx.xxx
- 查看服务器开启的端口：netstat -ntpl
- 关闭开启的端口：kill -9 20841
- 关闭所有进程：killall -9 nginx

## 3.安装nginx

- 下载安装包：nginx-1.9.9.tar.gz
- 解压之后通过ftp工具放入/usr/local目录下
- 进入解压之后的文件夹nginx-1.9.9
- 依次运行命令生成nginx可启动文件：./configure，make，make install
- 输入./configure报错：Permission denied(无权限)，重新输入：bash ./configure
- 启动nginx：/usr/local/nginx/sbin/nginx -s reload
- 若端口被占用，可重启该端口，或先关闭该端口再启动

## 4.防火墙

- 防火墙必须一定要关闭，否则通过服务器地址无法访问
- 查看：systemctl status firewalld
- 关闭：systemctl stop firewalld
- 启动：systemctl start firewalld

## 5.启动vue项目生成的dist文件夹

- 将dist文件夹下的内容拷贝到/usr/local/nginx/html目录下即可
- 浏览器输入服务器地址即可访问，默认80端口

## 6.修改nginx配置

- 

## 7.全局安装node环境

- 下载node压缩包：node-v10.16.3-linux-x64
- 在目录/usr/local下新建目录node
- 进入node目录，解压node：tar -xvf node-v10.16.3-linux-x64.tar.xz
- 配置全局node环境变量：ln -s /usr/local/node/node-v10.16.3-linux-x64/bin/node /usr/local/bin/node
- 配置全局npm环境变量：ln -s /usr/local/node/node-v10.16.3-linux-x64/bin/npm /usr/local/bin/npm
- 此时可执行node -v，npm -v查看版本号
- 切换cnpm：npm install -g cnpm --registry=https://registry.npm.taobao.org
- 配置全局cnpm环境变量：ln -s /usr/local/node/node-v10.16.3-linux-x64/bin/cnpm /usr/local/bin/cnpm

## 8.安装pm2

- 全局安装pm2：npm i pm2 -g
- 配置全局pm2环境变量：ln -s /usr/local/node/node-v10.16.3-linux-x64/bin/pm2 /usr/local/bin/pm2
- 此时可执行pm2 -v查看版本号
- 查看启动的应用程序：pm2 list
- 启动项目：pm2 start npm --name "nuxt-tijian" -- run start
- 关闭所有：pm2 stop all
- 删除所有：pm2 delete all
- 重启所有：pm2 restart all

## 9.启动nuxt项目

- 在根目录下新建project目录，进入之后再新建体检目录
- 拷贝.nuxt nuxt.config package
- 安装依赖npm/cnpm i
- 启动：npm run start
- 测试是否启动成功：curl http://localhost:3000 