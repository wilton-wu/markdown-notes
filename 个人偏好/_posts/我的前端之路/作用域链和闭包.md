---
title: 作用域链和闭包
date: 2017-05-06 23:25:30
categories: 我的前端之路
---
作用域链和闭包
<!--more-->
# 1.执行环境
1. 执行环境定义了变量或函数有权访问的其他数据，并决定他们各自的行为。
2. 每个执行环境都有一个与之相关联的变量对象，环境中定义的所有变量和函数都保存在这个对象中。
3. 某个执行环境中的所有代码执行完毕后，该环境被销毁，保存在其中的变量和函数定义也随之销毁。

# 2.执行上下文
1. 每次当控制器转到ECMAScript可执行代码的时候，即会进入到一个执行上下文。
2. 执行上下文是ECMA-262标准里的一个抽象概念，用于同可执行代码概念进行区分。
3. 活动的执行上下文组在逻辑上组成一个堆栈，堆栈底部永远都是全局上下文，而顶部就是当前执行上下文。

# 3.作用域
1. 作用域是一个函数在执行时期的执行环境。
2. ES6得作用域中不存在声明提前
3. 变量要在声明后使用，否则报错。

# 4.作用域链
1. 当代码在一个环境中执行时，会创建变量对象的一个作用域链。
2. 作用域链的用途，是保证对执行环境有权访问的所有变量和函数的有序访问。
3. 活动对象最开始时只包含一个变量，即arguments对象。
4. 全局执行环境的变量对象始终都是作用域链中的最后一个对象。
5. 在局部作用域中定义的变量可以在局部环境中与全局变量相互使用。

# 5.延长作用域链
1. try-catch语句中的catch块：创建一个新的变量对象，其中包含的是被抛出的错误对象的声明。
2. with语句：将指定的对象添加到作用域链中 。

# 6.块级作用域
作用场景：
1. 内存变量可能会覆盖外层变量。
2. 用来计数的循环变量泄露为全局变量。

# 7.闭包
1. 指有权访问另一个作用域链中的函数
2. 读取函数内部的局部变量；易造成变量污染。
3. 变量的值保存在内存中，不会被垃圾回收机制回收；易造成内存泄漏。

# 8.垃圾收集策略
1. 标记清除：当变量进入环境时，就将这个变量标记为“进入变量”。
2. 引用计数：跟踪记录每个值被引用的次数，当这个值的引用次数变成0时，将其占用的内存空间回收。