<!DOCTYPE html>
<html lang="zn">
<head>
  <meta charset="UTF-8">
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.2.min.js"></script>
  <style>
    #drag{
      width:100px;
      height:100px;
      background-color:yellow;
      border:solid 1px #666;
      position:absolute;
      cursor:move;
    }
  </style>
  <script type="text/javascript">
    $(document).ready(function(){
      var d=$("#drag");
      //计算x方向最大移动距离,2为双倍的边框宽度 
      var maxleft=$(window).width()-d.width()-2; 
      //计算y方向最大移动距离,2为双倍的边框宽度
      var maxtop=$(window).height()-d.height()-2;  
      
      d.bind("mousedown",function(event){
        /* 获取需要拖动节点的坐标 */
        var offset_x = $(this)[0].offsetLeft;
        var offset_y = $(this)[0].offsetTop;

        /* 获取当前鼠标的坐标 */
        var mouse_x = event.pageX;
        var mouse_y = event.pageY;
        
        $(document).bind("mousemove",function(ev){
          /* 计算鼠标移动了的位置 */
          var _x = ev.pageX - mouse_x;
          var _y = ev.pageY - mouse_y;
          /* 设置移动后的元素坐标 */
          var x= (offset_x + _x );
          var y= (offset_y + _y );
           
          if(x<0){
            var now_x=0+"px";
          }else if(x<maxleft){
            var now_x =x+ "px";
          }else {
            var now_x =maxleft+ "px";
          }

          if(y<0){
            var now_y=0+"px";
          }else if(y<maxtop){
            var now_y =y+ "px";
          }else {
            var now_y =maxtop+ "px";
          }
          
          d.css({
            top:now_y,
            left:now_x
          });
        });
      });
      
      $(document).bind("mouseup",function(){
        $(this).unbind("mousemove");
      });
    })
  </script>
</head>
<body>
  <div id="drag"></div>
</body>
</html>